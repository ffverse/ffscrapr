<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ffscrapr: Managing Cache • ffscrapr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="ffscrapr: Managing Cache">
<meta property="og:description" content="ffscrapr">
<meta property="og:image" content="ffscrapr.ffverse.com/reference/figures/logo.svg">
<meta property="og:image:alt" content="ffscrapr - an R package for Fantasy Football APIs">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@_TanHo">
<meta name="twitter:site" content="@DynastyProcess">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ffscrapr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.4.5.02</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Getting Started</li>
    <li>
      <a href="../articles/mfl_basics.html">MFL: Basics</a>
    </li>
    <li>
      <a href="../articles/sleeper_basics.html">Sleeper: Basics</a>
    </li>
    <li>
      <a href="../articles/fleaflicker_basics.html">Fleaflicker: Basics</a>
    </li>
    <li>
      <a href="../articles/espn_basics.html">ESPN: Basics</a>
    </li>
    <li>
      <a href="../articles/espn_authentication.html">ESPN: Private Leagues</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Custom API Calls</li>
    <li>
      <a href="../articles/mfl_getendpoint.html">MFL: Get Endpoint</a>
    </li>
    <li>
      <a href="../articles/sleeper_getendpoint.html">Sleeper: Get Endpoint</a>
    </li>
    <li>
      <a href="../articles/fleaflicker_getendpoint.html">Fleaflicker: Get Endpoint</a>
    </li>
    <li>
      <a href="../articles/espn_getendpoint.html">ESPN: Get Endpoint</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Cache</li>
    <li>
      <a href="../articles/ffscrapr_caching.html">ffscrapr: Managing Cache</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://discord.com/invite/5Er2FBnnQa">
    <span class="fab fa-discord fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/ffverse/ffscrapr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://www.ffverse.com">ffverse</a>
    </li>
    <li>
      <a href="https://ffsimulator.ffverse.com">ffsimulator package</a>
    </li>
    <li>
      <a href="https://ffpros.ffverse.com">ffpros package</a>
    </li>
    <li>
      <a href="https://www.github.com/ffverse">ffverse GitHub</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">nflverse</li>
    <li>
      <a href="https://www.nflfastr.com">nflfastR package</a>
    </li>
    <li>
      <a href="https://github.com/nflverse">nflverse GitHub</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">DynastyProcess</li>
    <li>
      <a href="https://dynastyprocess.com">DynastyProcess.com</a>
    </li>
    <li>
      <a href="https://github.com/dynastyprocess">DynastyProcess GitHub</a>
    </li>
  </ul>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ffscrapr_caching_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ffscrapr: Managing Cache</h1>
                        <h4 class="author">Tan Ho</h4>
            
            <h4 class="date">2021-08-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ffverse/ffscrapr/blob/master/vignettes/ffscrapr_caching.Rmd"><code>vignettes/ffscrapr_caching.Rmd</code></a></small>
      <div class="hidden name"><code>ffscrapr_caching.Rmd</code></div>

    </div>

    
    
<div id="caching-its-responsible-web-etiquette" class="section level2">
<h2 class="hasAnchor">
<a href="#caching-its-responsible-web-etiquette" class="anchor"></a>Caching: It’s Responsible Web Etiquette!</h2>
<p>One of the many packages that inspired ffscrapr is Dmytro Perepolkin’s <a href="https://dmi3kno.github.io/polite/">polite</a> package, which sets out some pillars of responsible web etiquette, including introducing yourself, taking slowly, and never asking twice for the same thing.</p>
<p>ffscrapr gives you convenient routes to support these:</p>
<ul>
<li><p>You can set a <code>user_agent</code> string with any connection to help identify yourself to the API platform (MFL actually gives you a higher rate limit if you <a href="https://api.myfantasyleague.com/2020/api_info">register with them as an API Client</a>!)</p></li>
<li><p>You can set <code>rate_limit</code> options to help manage the load on the API (and to comply with any restrictions that APIs have set out)</p></li>
<li><p>Behind the scenes, ffscrapr is saving the results of expensive (i.e. slow, data-heavy) and stable (i.e. not likely to change rapidly) queries so that a) it can return things faster to you and b) minimize server load.</p></li>
</ul>
<p>This vignette explains and helps you manage this caching.</p>
</div>
<div id="what-is-being-cached-how-long-is-it-being-cached-for" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-being-cached-how-long-is-it-being-cached-for" class="anchor"></a>What is being cached? How long is it being cached for?</h2>
<p>ffscrapr’s core functions often loop over the same, stable endpoints to help return the data for each function - things like “player names/positions/teams”, “franchise IDs/names”, and “league scoring rules” are all used frequently. ffscrapr incorporates <a href="https://github.com/r-lib/memoise">memoise</a> package to help with this functionality, and (as of this writing) saves the results of these functions:</p>
<ul>
<li>
<code><a href="../reference/mfl_players.html">mfl_players()</a></code>, <code><a href="../reference/sleeper_players.html">sleeper_players()</a></code>, <code><a href="../reference/fleaflicker_players.html">fleaflicker_players()</a></code> - these functions are stored for 7 days</li>
<li>
<code><a href="../reference/ff_franchises.html">ff_franchises()</a></code>, <code><a href="../reference/ff_scoring.html">ff_scoring()</a></code>, <code><a href="../reference/ff_league.html">ff_league()</a></code> - these functions are stored for 24 hours</li>
<li>
<code><a href="../reference/ff_standings.html">ff_standings()</a></code>, <code><a href="../reference/ff_playerscores.html">ff_playerscores()</a></code>, <code><a href="../reference/ff_starters.html">ff_starters()</a></code>, <code><a href="../reference/ff_schedule.html">ff_schedule()</a></code> , <code><a href="../reference/ff_userleagues.html">ff_userleagues()</a></code> - these functions are stored for one hour</li>
<li>
<code><a href="../reference/dp_playerids.html">dp_playerids()</a></code> and <code><a href="../reference/dp_values.html">dp_values()</a></code> - these functions are stored for 24 hours</li>
</ul>
<p>You can find an updated list of cached functions in the <a href="https://github.com/ffverse/ffscrapr/blob/main/R/zzz.R">zzz.R</a> source code page.</p>
</div>
<div id="where-is-it-being-cached" class="section level2">
<h2 class="hasAnchor">
<a href="#where-is-it-being-cached" class="anchor"></a>Where is it being cached?</h2>
<p>By default, ffscrapr will save the results of each function call (i.e. function + arguments) into memory.</p>
<p>If you would like to have your cache stored on your local filesystem, you can adjust this behaviour by adding the following line to your (or your project) .Rprofile, or by adding it BEFORE you library/load the package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>ffscrapr.cache <span class="op">=</span> <span class="st">"filesystem"</span><span class="op">)</span></code></pre></div>
<p>This will instruct ffscrapr to store the cache on your machine, as dictated by the typical cache location for your operating system. You can see where this is by running the following line of code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">rappdirs</span><span class="fu">::</span><span class="fu"><a href="https://rappdirs.r-lib.org/reference/user_cache_dir.html">user_cache_dir</a></span><span class="op">(</span><span class="st">"ffscrapr"</span><span class="op">)</span></code></pre></div>
</div>
<div id="how-can-i-clear-the-cache" class="section level2">
<h2 class="hasAnchor">
<a href="#how-can-i-clear-the-cache" class="anchor"></a>How can I clear the cache?</h2>
<p>You can use the following function to clear the cache (whether it is in memory or on your filesystem):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">.ffscrapr_clear_cache</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://twitter.com/_TanHo">Tan Ho</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '7abddd2aa591d955b365235f35d75a38',
    indexName: 'dynastyprocess',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
